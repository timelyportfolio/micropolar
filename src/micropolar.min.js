function linePlot(a){a&&a.size&&(a.width=a.height=a.size);var t=micropolar.LinePlot(),r={geometry:[t],data:d3.range(0,721,1).map(function(a,t){return[a,2*(t/720)]}),height:250,width:250,angularDomain:[0,360],additionalAngularEndTick:!1,angularTicksStep:30,angularTicksSuffix:"ยบ",minorTicks:1,flip:!1,originTheta:0,radialAxisTheta:-30,containerSelector:"body"};micropolar._override(a,r);var e=micropolar.Axis().config(r);e()}function dotPlot(a){a&&a.size&&(a.width=a.height=a.size);var t=micropolar.DotPlot(),r=d3.scale.linear().domain([-3,3]).range([0,1]),e={geometry:[t],data:d3.range(0,100).map(function(){return[~~(1e3*r(micropolar._rndSnd())),~~(100*r(micropolar._rndSnd()))]}),height:250,width:250,angularDomain:[0,1e3],additionalAngularEndTick:!1,angularTicksStep:100,minorTicks:1,flip:!1,originTheta:0,radialAxisTheta:-15,containerSelector:"body"};micropolar._override(a,e);var i=micropolar.Axis().config(e);i()}function barChart(a){a&&a.size&&(a.width=a.height=a.size);var t=micropolar.BarChart(),r={geometry:[t],data:d3.range(0,20).map(function(a,t){return[50*a,Math.ceil(5*Math.random()*(t+1))]}),height:250,width:250,radialDomain:[-60,100],angularDomain:[0,1e3],angularTicksStep:50,minorTicks:1,flip:!0,originTheta:0,radialAxisTheta:-10,containerSelector:"body"};micropolar._override(a,r);var e=micropolar.Axis().config(r);e()}function areaChart(a){a&&a.size&&(a.width=a.height=a.size);var t=micropolar.AreaChart(),r={geometry:[t],data:d3.range(0,12).map(function(a){return[50*a+50,~~(10*Math.random()+5)]}),height:250,width:250,radialDomain:[0,20],angularDomain:["North","East","South","West"],additionalAngularEndTick:!1,minorTicks:2,flip:!0,originTheta:-90,radialAxisTheta:-30,radialTicksSuffix:"%",containerSelector:"body"};micropolar._override(a,r);var e=micropolar.Axis().config(r);e()}function clock(a){a&&a.size&&(a.width=a.height=a.size);var t=micropolar.Clock(),r={geometry:[t],data:[12,4,8],height:250,width:250,angularDomain:[0,12],additionalAngularEndTick:!1,minorTicks:9,flip:!0,originTheta:-90,showRadialAxis:!1,showRadialCircle:!1,rewriteTicks:function(a){return"0"===a?"12":a},labelOffset:-15,tickLength:5,containerSelector:"body"};micropolar._override(a,r);var e=micropolar.Axis().config(r);e()}micropolar={version:"0.1.0"},micropolar.Axis=function(){function a(){d3.select(e.containerSelector).datum(e.data).each(function(a){function i(){var a=d3.mouse(m.node()),t=a[0]-e.width/2,r=a[1]-e.height/2,i=180*((Math.atan2(r,t)+Math.PI)/Math.PI),n=Math.sqrt(t*t+r*r);return{angle:i,radius:n}}var n=Math.min(e.width,e.height)/2-e.margin,l=d3.extent(a.map(function(a){return a[1]}));t=d3.scale.linear().domain(e.radialDomain||l).range([0,n]);var o=d3.extent(a.map(function(a){return a[0]})),c=e.angularDomain||o,s="string"==typeof c[0];s?c=[0,c.length*(e.minorTicks+1)]:(c[2]||(c[2]=e.angularTicksStep),c[2]/=e.minorTicks+1),e.additionalAngularEndTick&&(c[1]+=1);var d=d3.range.apply(this,c);s||(d=d.map(function(a){return parseFloat(a.toPrecision(12))})),r=d3.scale.linear().domain(c.slice(0,2)).range(e.flip?[0,360]:[360,0]);var u='<svg class="chart">                         <g class="chart-group">                             <circle class="background-circle"></circle>                             <g class="angular axis"></g>                            <g class="geometry"></g>                            <g class="radial axis">                                 <circle class="outside-circle"></circle>                             </g>                             <g class="guides"><line></line><circle></circle></g>                         </g>                     </svg>',g={fill:"none",stroke:"silver"},h={"font-size":11,"font-family":"Tahoma, sans-serif"},f=d3.select(this).selectAll("div.chart-container").data([0]);f.enter().append("div").classed("chart-container",!0).html(u);var m=f.select("svg");m.attr({width:e.width,height:e.height}).style({"pointer-events":"none"});var p=m.select(".chart-group").attr("transform","translate("+e.width/2+","+e.height/2+")"),k=m.select(".radial.axis");if(e.showRadialCircle){var v=k.selectAll("circle.grid-circle").data(t.ticks(5));v.enter().append("circle").attr({"class":"grid-circle"}).style(g),v.attr("r",t),v.exit().remove()}k.select("circle.outside-circle").attr({r:n}).style(g),m.select("circle.background-circle").attr({r:n}).style(g);var x=function(a,t){return(r(s?t:a)+e.originTheta)%360};if(e.showRadialAxis){var y=d3.svg.axis().scale(t).ticks(5).tickSize(5),k=m.select(".radial.axis").call(y).attr({transform:"rotate("+e.radialAxisTheta+")"});k.selectAll(".domain").style(g),k.selectAll("g>text").text(function(){return this.textContent+e.radialTicksSuffix}).style(h).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(){return"horizontal"===e.radialTickOrientation?"rotate("+-e.radialAxisTheta+") translate("+[0,h["font-size"]]+")":"translate("+[0,h["font-size"]]+")"}}),k.selectAll("g>line").style({stroke:"black"})}var S=m.select(".angular.axis").selectAll("g.angular-tick").data(d),T=S.enter().append("g").attr({"class":"angular-tick",transform:function(a,t){return"rotate("+x(a,t)+")"}});S.exit().remove(),T.append("line").attr({"class":"grid-line"}).classed("major",function(a,t){return 0==t%(e.minorTicks+1)}).classed("minor",function(a,t){return!(0==t%(e.minorTicks+1))}).style(g),T.selectAll(".minor").style({stroke:"#eee"}),T.append("text").attr({"class":"axis-text"}).style(h),m.selectAll("line.grid-line").attr({x1:e.tickLength?n-e.tickLength:0,x2:n});var A=m.selectAll("text.axis-text").attr({x:n+e.labelOffset,dy:".35em",transform:function(a,t){var r=x(a,t),i=n+e.labelOffset,l=e.angularTickOrientation;return"horizontal"==l?"rotate("+-r+" "+i+" 0)":"radial"==l?270>r&&r>90?"rotate(180 "+i+" 0)":null:"rotate("+(180>=r&&r>0?-90:90)+" "+i+" 0)"}}).style({"text-anchor":"middle"}).text(function(a,t){return s?0==t%(e.minorTicks+1)?e.angularDomain[t/(e.minorTicks+1)]+e.angularTicksSuffix:"":0==t%(e.minorTicks+1)?a+e.angularTicksSuffix:""}).style(h);e.rewriteTicks&&A.text(function(a,t){return e.rewriteTicks(this.textContent,t)});var C=this;e.geometry.forEach(function(a){a.config({axisConfig:e,radialScale:t,angularScale:r,containerSelector:C})()}),m.select(".geometry").style({"pointer-events":"visible"});var b=m.select(".guides");p.on("mousemove.angular-guide",function(){var a=i().angle;b.select("line").attr({x1:0,y1:0,x2:-n,y2:0,transform:"rotate("+a+")"}).style({stroke:"grey",opacity:1})}).on("mouseout.angular-guide",function(){b.select("line").style({opacity:0})}),p.on("mousemove.radial-guide",function(){var a=i().radius;b.select("circle").attr({r:a}).style({stroke:"grey",fill:"none",opacity:1})}).on("mouseout.radial-guide",function(){b.select("circle").style({opacity:0})})})}var t,r,e={geometry:[],data:null,height:500,width:500,radialDomain:null,angularDomain:null,angularTicksStep:1,flip:!0,originTheta:0,labelOffset:10,radialAxisTheta:-45,radialTicksSuffix:"",angularTicksSuffix:"",hideFirstTick:!0,angularTicks:null,showRadialAxis:!0,showRadialCircle:!0,minorTicks:0,tickLength:null,rewriteTicks:null,angularTickOrientation:"horizontal",radialTickOrientation:"horizontal",containerSelector:"body",margin:25,additionalAngularEndTick:!0},i=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,e),this):e},a.radialScale=function(){return t},a.angularScale=function(){return r},d3.rebind(a,i,"on"),a},micropolar._override=function(a,t){for(x in a)x in t&&(t[x]=a[x])},micropolar._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},micropolar.BarChart=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r={fill:t.fill,stroke:t.stroke},e=12,i=d3.select(this).select("svg g.geometry").classed("bar-chart",!0),n=i.selectAll("rect.mark").data(a);n.enter().append("rect").attr({"class":"mark"}),n.attr({x:-e/2,y:t.radialScale(0),width:e,height:function(a){return t.radialScale(a[1])-t.radialScale(0)},transform:function(a){return"rotate("+(t.axisConfig.originTheta-90+t.angularScale(a[0]))+")"}}).style(r)})}var t={containerSelector:"body",dotRadius:5,fill:"orange",stroke:"red",radialScale:null,angularScale:null,axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.Clock=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r=t.radialScale.range()[1],e=[r/1.3,r/1.5,r/1.5],i=[r/15,r/10,r/30];a=[0,4,8],t.angularScale.domain([0,12]);var n={fill:t.fill,stroke:t.stroke},l=d3.select(this).select("svg g.geometry").classed("clock",!0),o=l.selectAll("rect.mark").data(a);o.enter().append("rect").attr({"class":"mark"}),o.attr({x:function(a,t){return-i[t]/2},y:function(a,t){return 2==t?-r/5:0},width:function(a,t){return i[t]},height:function(a,t){return e[t]},transform:function(a){return"rotate("+(t.axisConfig.originTheta-90+t.angularScale(a))+")"}}).style(n),l.selectAll("circle.mark").data([0]).enter().append("circle").attr({"class":"mark"}).attr({r:r/10}).style({"fill-opacity":1}).style(n)})}var t={containerSelector:"body",fill:"orange",stroke:"red",radialScale:null,angularScale:null,axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.AreaChart=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r=360/a.length*Math.PI/180/2,e={fill:t.fill,stroke:t.stroke},i=d3.select(this).select("svg g.geometry").classed("area-chart",!0),n=i.selectAll("path.mark").data(a);n.enter().append("path").attr({"class":"mark"}),n.attr({d:function(a){var e=t.radialScale(a[1]),i=Math.tan(r)*e;return"M"+[[0,0],[e,i],[e,-i]].join("L")+"Z"},transform:function(a,r){return"rotate("+(t.axisConfig.originTheta-90+t.angularScale(r))+")"}}).style(e)})}var t={containerSelector:"body",dotRadius:5,fill:"orange",stroke:"red",radialScale:null,angularScale:null,axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.DotPlot=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r={fill:t.fill,stroke:t.stroke},e=d3.select(this).select("svg g.geometry").classed("dot-plot",!0),i=e.selectAll("circle.mark").data(a);i.enter().append("circle").attr({"class":"mark"}),i.attr({cy:function(a){return t.radialScale(a[1])},r:t.dotRadius,transform:function(a){return"rotate("+(t.axisConfig.originTheta-90+t.angularScale(a[0]))+")"}}).style(r)})}var t={containerSelector:"body",dotRadius:3,fill:"orange",stroke:"red",radialScale:null,angularScale:null,axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.LinePlot=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r=d3.svg.line.radial().radius(function(a){return t.radialScale(a[1])}).angle(function(a){return t.angularScale(a[0])*Math.PI/180*(t.axisConfig.flip?1:-1)}),e={fill:"none","stroke-width":t.lineStrokeSize,stroke:t.stroke,"pointer-events":"stroke"},i=d3.select(this).select("svg g.geometry").classed("line-plot",!0),n=i.selectAll("path.mark").data([0]);n.enter().append("path").attr({"class":"mark"}),i.select("path.mark").datum(a).attr({d:r,transform:"rotate("+(t.axisConfig.originTheta+90)+")","stroke-width":t.lineStrokeSize+"px"}).style(e)})}var t={containerSelector:"body",lineStrokeSize:2,stroke:"orange",radialScale:null,angularScale:null,axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.StackedAreaChart=function(){function a(){d3.select(t.containerSelector).datum(t.axisConfig.data).each(function(a){var r=d3.nest().key(function(a){return a[2]}).entries(a);r.forEach(function(a){a.values.forEach(function(a){a.x=a[0],a.y=+a[1]})});var e=d3.layout.stack();e(r.map(function(a){return a.values}));var i=360/d3.keys(d3.nest().key(function(a){return a[0]}).map(a)).length*Math.PI/180/2,n={fill:function(a){return t.colorScale(a[2])},stroke:"gray"},l=d3.select(this).select("svg g.geometry").classed("area-chart",!0),o=l.selectAll("path.mark").data(e);o.enter().append("path").attr({"class":"mark"}),o.attr({d:function(a){var r=t.radialScale(a.y+a.y0),e=t.radialScale(a.y0),n=Math.tan(i)*r,l=Math.tan(i)*e;return"M"+[[e,l],[r,n],[r,-n],[e,-l]].join("L")+"Z"},transform:function(a,r){return"rotate("+(t.axisConfig.originTheta-90+t.angularScale(r))+")"}}).style(n)})}var t={containerSelector:"body",dotRadius:5,fill:"orange",stroke:"red",radialScale:null,angularScale:null,colorScale:d3.scale.category20(),axisConfig:null},r=d3.dispatch("hover");return a.config=function(a){return arguments.length?(micropolar._override(a,t),this):t},d3.rebind(a,r,"on"),a},micropolar.preset={linePlot:linePlot,dotPlot:dotPlot,barChart:barChart,areaChart:areaChart,clock:clock};